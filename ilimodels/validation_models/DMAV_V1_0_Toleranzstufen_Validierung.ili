INTERLIS 2.4;

MODEL DMAV_V1_0_Toleranzstufen_Validierung (de) 
AT "https://www.kgk-cgc.ch/" 
VERSION "2025-03-30" =
  
IMPORTS UNQUALIFIED INTERLIS;
IMPORTS UNQUALIFIED Text_V2;
IMPORTS UNQUALIFIED Math_V2_1;
IMPORTS UNQUALIFIED ObjectPool_V1_0;
IMPORTS UNQUALIFIED Elements_V1_0;
IMPORTS DMAVTYM_Topologie_V1_0;
IMPORTS DMAV_FixpunkteAVKategorie3_V1_0;
IMPORTS DMAV_Bodenbedeckung_V1_0;
IMPORTS DMAV_Einzelobjekte_V1_0;
IMPORTS DMAV_Nomenklatur_V1_0;
IMPORTS DMAV_Grundstuecke_V1_0;
IMPORTS DMAV_Rohrleitungen_V1_0;
IMPORTS DMAV_HoheitsgrenzenAV_V1_0;
IMPORTS DMAV_Toleranzstufen_V1_0;
IMPORTS DMAV_Gebaeudeadressen_V1_0;
IMPORTS KGKCGC_FPDS2_V1_1;
IMPORTS FixpunkteLV_V1_0;

    VIEW TOPIC Toleranzstufen_Validierung = 
    DEPENDS ON DMAV_Toleranzstufen_V1_0.Toleranzstufen;
  
        VIEW v_Toleranzstufe
            PROJECTION OF TS ~ DMAV_Toleranzstufen_V1_0.Toleranzstufen.Toleranzstufe;
        =
            ALL OF TS;

            !!@ ilivalid.check = warning
            !!@ ilivalid.msg="Flächenperimeter muss mit Referenzperimeter der Liegenschaften übereinstimmen (Toleranz 2 mm)";
            !!@ ilivalid.msg_de="Flächenperimeter muss mit Referenzperimeter der Liegenschaften übereinstimmen (Toleranz 2 mm)";
            !!@ ilivalid.msg_fr="Le périmètre doit être identique au périmètre de référence des biens-fonds (tolérance 2 mm)";
            !!@ ilivalid.msg_it="Il perimetro deve coincidere con il perimetro di riferimento del bene immobile (Tolleranza 2 mm)";
            !! Kategorie: modellübergreifend
            !! Umsetzung Phase 2;
            SET CONSTRAINT CH160351: WHERE DEFINED(Entstehung) AND NOT(DEFINED(Untergang)): (
                    DMAVTYM_Topologie_V1_0.isGeometrySpatiallyEqual(ALL, >>Geometrie, ObjectPool_V1_0.filter(ObjectPool_V1_0.allObjects(>DMAV_Grundstuecke_V1_0.Grundstuecke.Liegenschaft), "DEFINED(Grundstueck->Entstehung) AND NOT(DEFINED(Grundstueck->Untergang))"), >>DMAV_Grundstuecke_V1_0.Grundstuecke.Liegenschaft->Geometrie, 0.002)
            );
        
        END v_Toleranzstufe;

    END Toleranzstufen_Validierung;       

END DMAV_V1_0_Toleranzstufen_Validierung.
